import{j as e,o as ce,C as G,a as ie,e as J,b as X,S as m,r as h,k as K,B as c,p as _,D as F,l as H,m as O,n as B,d as w,A as re,h as ne,u as de,i as oe,y}from"./index-CJ34pbwU.js";import{C as xe}from"./useBadge-CREWZvht.js";import{A,a as T,b as I,c as R,d as M,e as $,f as E,g as z,h as L}from"./alertDialog-_QB6fTsa.js";import{u as q,T as Q,a as Y,b as f,c as Z,f as P,d as ee,e as V,A as x,g as se,h as ae,i as te,C as W,P as he}from"./paginationHook-DEgmg8Vn.js";import{C as ge}from"./chevron-left-CIzyo49A.js";function je({className:g,...r}){return e.jsx("textarea",{"data-slot":"textarea",className:ce("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",g),...r})}const me=()=>e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs(G,{children:[e.jsx(ie,{children:e.jsx(J,{className:"ck-title mb-2",children:"계정 정보"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m,{className:"h-16 w-16 rounded-full"}),e.jsxs("div",{children:[e.jsx(m,{className:"mb-2 h-6 w-32"}),e.jsx(m,{className:"mb-1 h-4 w-40"}),e.jsx(m,{className:"h-4 w-36"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{className:"h-10 w-24"}),e.jsx(m,{className:"h-10 w-24"}),e.jsx(m,{className:"h-10 w-24"})]})]}),e.jsx("div",{className:"mb-6 grid grid-cols-3 gap-6",children:Array.from({length:9}).map((g,r)=>e.jsxs("div",{children:[e.jsx(m,{className:"mb-2 h-4 w-20"}),e.jsx(m,{className:"h-6 w-24"})]},r))}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(m,{className:"mb-2 h-4 w-24"}),e.jsx(m,{className:"h-20 w-full"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(m,{className:"h-10 w-16"})})]})]})]})})});function pe({userItems:g}){const[r,t]=h.useState([]),[o,b]=h.useState({}),N=K(),u=["id","title","type","company","maxApplicants","statusText"],p=[{accessorKey:"id",header:({column:s})=>e.jsx("div",{children:e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["ID",e.jsx(x,{})]})}),cell:({row:s})=>e.jsx("div",{children:s.getValue("id")}),size:50},{accessorKey:"title",header:({column:s})=>e.jsx("div",{children:e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["캠페인 제목",e.jsx(x,{})]})}),cell:({row:s})=>e.jsx("div",{className:"overflow-hidden text-ellipsis",children:s.getValue("title")}),size:150},{accessorKey:"campaignType",header:({column:s})=>e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["캠페인 유형",e.jsx(x,{})]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("campaignType")}),size:150},{accessorKey:"company",header:({column:s})=>e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["회사명",e.jsx(x,{})]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("company")}),size:150},{accessorKey:"statusText",header:({column:s})=>e.jsx("div",{children:u.includes(s.id)&&e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["상태",e.jsx(x,{})]})}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("statusText")}),size:100},{accessorKey:"createdAt",header:({column:s})=>e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["생성일",e.jsx(x,{})]}),cell:({row:s})=>{const l=s.getValue("createdAt").split("T")[0];return e.jsx("div",{children:l})},size:150}],v=p.reduce((s,i)=>s+(i.size||100),0),a=q({data:g,columns:p,onSortingChange:t,getCoreRowModel:te(),getSortedRowModel:ae(),getFilteredRowModel:se(),onRowSelectionChange:b,state:{sorting:r,rowSelection:o},columnResizeMode:"onChange",enableColumnResizing:!1});return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs(Q,{className:"table-fixed",style:{minWidth:`${v}px`},children:[e.jsx(Y,{children:a.getHeaderGroups().map(s=>e.jsx(f,{children:s.headers.map(i=>e.jsx(Z,{style:{width:`${i.getSize()}px`},children:i.isPlaceholder?null:P(i.column.columnDef.header,i.getContext())},i.id))},s.id))}),e.jsx(ee,{children:a.getRowModel().rows?.length?a.getRowModel().rows.map(s=>e.jsx(f,{"data-state":s.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>N(`/campaigns/${s.original.campaignId}`),children:s.getVisibleCells().map(i=>e.jsx(V,{className:"overflow-hidden text-ellipsis whitespace-nowrap",style:{width:`${i.column.getSize()}px`},children:P(i.column.columnDef.cell,i.getContext())},i.id))},s.id)):e.jsx(f,{children:e.jsx(V,{colSpan:p.length,className:"h-24 text-center whitespace-nowrap",children:"활동 내역이 없습니다."})})})]})})})}function ue({clientsItems:g}){const[r,t]=h.useState([]),[o,b]=h.useState({}),N=K(),u=[{accessorKey:"id",header:({column:a})=>e.jsx("div",{children:e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["ID",e.jsx(x,{})]})}),cell:({row:a})=>e.jsx("div",{children:a.getValue("id")}),size:50},{accessorKey:"title",header:({column:a})=>e.jsx("div",{children:e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["캠페인 제목",e.jsx(x,{})]})}),cell:({row:a})=>e.jsx("div",{className:"overflow-hidden text-ellipsis",children:a.getValue("title")}),size:150},{accessorKey:"campaignType",header:({column:a})=>e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["캠페인 타입",e.jsx(x,{})]}),cell:({row:a})=>e.jsx("div",{className:"lowercase",children:a.getValue("campaignType")}),size:100},{accessorKey:"company",header:({column:a})=>e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["회사명",e.jsx(x,{})]}),cell:({row:a})=>e.jsx("div",{className:"lowercase",children:a.getValue("company")}),size:100},{accessorKey:"statusText",header:({column:a})=>e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["신청 상태",e.jsx(x,{})]}),cell:({row:a})=>e.jsx("div",{className:"lowercase",children:a.getValue("statusText")}),size:100},{accessorKey:"recruitmentPeriod",header:({column:a})=>e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["모집 기간",e.jsx(x,{})]}),cell:({row:a})=>e.jsx("div",{className:"lowercase",children:a.getValue("recruitmentPeriod")}),size:100},{accessorKey:"approvedBy",header:({column:a})=>e.jsxs(c,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["승인자명",e.jsx(x,{})]}),cell:({row:a})=>e.jsx("div",{className:"lowercase",children:a.getValue("approvedBy")}),size:100}],p=u.reduce((a,s)=>a+(s.size||100),0),v=q({data:g,columns:u,onSortingChange:t,getCoreRowModel:te(),getSortedRowModel:ae(),getFilteredRowModel:se(),onRowSelectionChange:b,state:{sorting:r,rowSelection:o},columnResizeMode:"onChange",enableColumnResizing:!1});return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs(Q,{className:"table-fixed",style:{minWidth:`${p}px`},children:[e.jsx(Y,{children:v.getHeaderGroups().map(a=>e.jsx(f,{children:a.headers.map(s=>e.jsx(Z,{style:{width:`${s.getSize()}px`},children:s.isPlaceholder?null:P(s.column.columnDef.header,s.getContext())},s.id))},a.id))}),e.jsx(ee,{children:v.getRowModel().rows?.length?v.getRowModel().rows.map(a=>e.jsx(f,{"data-state":a.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>N(`/campaigns/${a.original.id}`),children:a.getVisibleCells().map(s=>e.jsx(V,{className:"overflow-hidden text-ellipsis whitespace-nowrap",style:{width:`${s.column.getSize()}px`},children:P(s.column.columnDef.cell,s.getContext())},s.id))},a.id)):e.jsx(f,{children:e.jsx(V,{colSpan:u.length,className:"h-24 text-center whitespace-nowrap",children:"활동 내역이 없습니다."})})})]})})})}function ve(){const{userId:g}=_(),[r,t]=h.useState(null),[o,b]=h.useState("ALL"),[N,u]=h.useState(),p=[{status:"ALL",label:"전체 캠페인"},{status:"APPLIED",label:"선정"},{status:"PENDING",label:"대기"},{status:"SELETED",label:"선택"},{status:"REJECTED",label:"거절"},{status:"COMPLETED",label:"완료"}],v=[{status:"ALL",label:"전체 캠페인"},{status:"PENDING",label:"대기"},{status:"APPROVED",label:"승인"},{status:"REJECTED",label:"거절"},{status:"EXPIRED",label:"만료"}],a=async(l=0,D)=>{try{const k=D==="ALL"?`/users/${g}/activities`:`/users/${g}/activities?status=${D}`,C=(await w.get(k)).data.data;t(C),u(C.pagination),console.log(C)}catch(k){console.log(k)}},s=l=>{a(l,o)},i=l=>{b(l),a(0,l)};return h.useEffect(()=>{a(0,o)},[]),!r||!N?e.jsx("div",{children:"데이터를 불러오는데 실패했습니다."}):e.jsxs("div",{className:"flex flex-col",children:[r.userRole==="USER"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"ck-sub-title-1 ",children:"사용자 캠페인 활동 내역"}),e.jsxs(F,{children:[e.jsx(H,{asChild:!0,children:e.jsxs(c,{variant:"outline",children:[p.find(l=>l.status===o)?.label||"상태 필터",e.jsx(W,{})]})}),e.jsx(O,{align:"end",children:p.map(l=>e.jsx(B,{checked:o===l.status,onClick:()=>i(l.status),children:l.label},l.status))})]})]}),e.jsx(pe,{userItems:r.items})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"ck-sub-title-1",children:"클라이언트 캠페인 활동 내역"}),e.jsxs(F,{children:[e.jsx(H,{asChild:!0,children:e.jsxs(c,{variant:"outline",children:[v.find(l=>l.status===o)?.label||"상태 필터",e.jsx(W,{})]})}),e.jsx(O,{align:"end",children:v.map(l=>e.jsx(B,{checked:o===l.status,onClick:()=>i(l.status),children:l.label},l.status))})]})]}),e.jsx(ue,{clientsItems:r.items})]}),e.jsx("div",{className:"mt-4",children:e.jsx(he,{pageData:N,onPageChange:s})})]})}function ke(){const g=K(),{userId:r}=_(),[t,o]=h.useState(null),[b,N]=h.useState(""),[u,p]=h.useState(!1),[v,a]=h.useState(!1),s={GOOGLE:"구글",kakao:"카카오",USER:"사용자",CLIENT:"클라이언트",ADMIN:"관리자",LOCAL:"로컬",SOCIAL:"소셜",UNKNOWN:"비공개",MALE:"남성",FEMALE:"여성"},i=async j=>{a(!0);try{const d=(await w.get(`/users/${j}`)).data.data,S={...d,accountType:s[d.accountType]||d.accountType,role:s[d.role]||d.role,gender:s[d.gender]||d.gender,provider:s[d.provider]||d.provider};o(S),N(d.memo||"")}catch(n){y.error("유저 정보 조회에 실패했습니다."),console.log(n)}finally{a(!1)}},l=async j=>{try{const n=await w.put(`/users/${j}/status`),d=n.data.data;o(S=>({...S,...d})),y.success(n.data.message)}catch(n){console.log(n),y.error("상태 변경에 실패했습니다.")}},D=async j=>{if(window.confirm("사용자를 삭제하시겠습니까?"))try{const n=await w.delete(`/users/${j}`);g("/users"),y.success("사용자가 삭제되었습니다."),console.log(n)}catch(n){console.log(n)}},k=async(j,n)=>{try{const S=(await w.put(`/users/${j}/memo`,{memo:n},{headers:{"Content-Type":"application/json"}})).data.data;o(le=>({...le,...S})),p(!1),y.success("메모가 업데이트 되었습니다.")}catch(d){y.error("메모 업데이트에 실패했습니다."),console.log(d)}},U=j=>{N(j.target.value)},C=async j=>{try{await w.put(`/users/${j}/promote-to-client`),await i(j.toString()),y.success("클라이언트로 승급되었습니다.")}catch(n){console.log(n)}};return h.useEffect(()=>{r&&i(r)},[r]),v?e.jsx(me,{}):t?e.jsx("div",{className:"min-w-[650px] px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx("div",{children:e.jsx(ge,{onClick:()=>g("/users"),className:"cursor-pointer"})}),e.jsxs(G,{children:[e.jsxs("div",{className:"flex gap-4 px-6",children:[e.jsx(J,{className:"ck-title",children:"사용자 정보"}),e.jsx(xe,{variant:t.role})]}),e.jsxs(X,{className:"pt-2",children:[e.jsxs("div",{className:"flex justify-between pb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(re,{className:"h-16 w-16",children:[e.jsx(ne,{src:t.profileImg||de,alt:t.nickname}),e.jsx(oe,{})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"ck-body-2",children:[t.nickname," (",t.gender||"성별 미공개",","," ",t.age||"나이 미공개",")"]}),e.jsx("p",{className:"ck-body-2 text-gray-500",children:t.email||"이메일 없음"}),e.jsx("p",{className:"ck-body-2 text-gray-500",children:t.phone||"전화번호 없음"})]})]}),e.jsxs("div",{className:"flex gap-2 px-4",children:[t.role==="사용자"&&e.jsxs(A,{children:[e.jsx(T,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"권한 승급"})}),e.jsxs(I,{className:"w-[350px]",children:[e.jsxs(R,{children:[e.jsx(M,{children:"권한을 승급시키겠습니까?"}),e.jsx($,{children:"이 작업은 되돌릴 수 없습니다"})]}),e.jsxs(E,{children:[e.jsx(z,{children:"취소"}),e.jsx(L,{onClick:()=>C(t.id),children:"확인"})]})]})]}),e.jsxs(A,{children:[e.jsx(T,{asChild:!0,children:e.jsx(c,{className:`ck-body-1 flex cursor-pointer items-center gap-2 rounded-md border px-4 py-2 transition-colors ${t.active?"hover:bg-ck-red-500 hover:text-white":"hover:bg-ck-blue-500 hover:text-white"}`,variant:"outline",children:t.active?"비활성화":"활성화"})}),e.jsxs(I,{className:"w-[350px]",children:[e.jsxs(R,{children:[e.jsx(M,{children:t.active?"사용자를 비활성화 시키겠습니까?":"사용자를 활성화 시키겠습니까?"}),e.jsx($,{children:"이 작업은 되돌릴 수 없습니다"})]}),e.jsxs(E,{children:[e.jsx(z,{children:"취소"}),e.jsx(L,{onClick:()=>l(t.id),children:"확인"})]})]})]}),e.jsxs(A,{children:[e.jsx(T,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"계정 삭제"})}),e.jsxs(I,{className:"w-[350px]",children:[e.jsxs(R,{children:[e.jsx(M,{children:"계정을 삭제하시겠습니까?"}),e.jsx($,{children:"이 작업은 되돌릴 수 없습니다"})]}),e.jsxs(E,{children:[e.jsx(z,{children:"취소"}),e.jsx(L,{onClick:()=>D(t.id),children:"확인"})]})]})]})]})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"ck-caption-1 text-ck-gray-600",children:"사용자 ID"}),e.jsx("p",{className:"ck-body-2",children:t.id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"ck-caption-1 text-ck-gray-600",children:"계정 상태"}),t.active?e.jsx("p",{className:"ck-body-2 text-ck-blue-500",children:"활성화"}):e.jsx("p",{className:"ck-body-2 text-ck-red-500",children:"비활성화"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ck-gray-600 ck-caption-1",children:"이메일 인증"}),e.jsx("div",{className:"ck-body-2",children:t.emailVerified?e.jsx("p",{className:"text-ck-blue-500 ck-body-2",children:"인증됨"}):e.jsx("p",{className:"text-ck-red-500 ck-body-2",children:"인증 필요"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ck-gray-600 ck-caption-1",children:"계정 서비스"}),e.jsx("p",{className:"ck-body-2",children:t.provider})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ck-gray-600 ck-caption-1",children:"계정 타입"}),e.jsx("p",{className:"ck-body-2",children:t.accountType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ck-gray-600 ck-caption-1",children:"계정 플랫폼"}),e.jsx("p",{className:"ck-body-2",children:t.platforms??"정보 없음"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ck-gray-600 ck-caption-1",children:"생성일"}),e.jsx("p",{className:"ck-body-2",children:t.createdAt.split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-ck-gray-600 ck-caption-1",children:"업데이트일"}),e.jsx("p",{className:"ck-body-2",children:t.updatedAt.split("T")[0]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"ck-body-2",children:"사용자 메모"}),u?e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx(je,{placeholder:"텍스트를 입력하세요.",value:b,onChange:U})}):e.jsx("div",{className:"ck-body-2 border-ck-gray-300 rounded-md border bg-transparent px-3 py-2",children:t.memo?t.memo:"내용이 없습니다."}),u?e.jsx("div",{className:"flex justify-end",children:e.jsxs(A,{children:[e.jsx(T,{asChild:!0,children:e.jsx(c,{className:"ck-body-1 text-ck-gray-900 hover:bg-ck-gray-300 cursor-pointer border bg-white",children:"저장"})}),e.jsxs(I,{className:"w-[350px]",children:[e.jsx(R,{children:e.jsx(M,{children:"메모를 저장하시겠습니까?"})}),e.jsxs(E,{children:[e.jsx(z,{children:"취소"}),e.jsx(L,{onClick:()=>k(t.id,b||""),children:"확인"})]})]})]})}):e.jsx("div",{className:"flex justify-end",children:e.jsx(c,{className:"ck-body-1 text-ck-gray-900 hover:bg-ck-gray-300 cursor-pointer border bg-white",onClick:()=>p(!0),children:"수정"})})]})]})]}),e.jsx(ve,{})]})}):e.jsx("div",{children:"데이터가 없습니다."})}export{ke as default};
