import{r as n,k,j as e,B as r,C as T,D as z,l as V,m as K,n as A,I as P,d as N}from"./index-CJ34pbwU.js";import{u as F,T as $,a as E,b as w,c as H,f as y,d as B,e as D,A as d,g as U,h as L,i as W,C as q,P as G}from"./paginationHook-DEgmg8Vn.js";import{U as J}from"./usersTableSkeleton-BQ3Yo-zd.js";import{S as O}from"./search-BQDt5YfD.js";import"./chevron-left-CIzyo49A.js";const S=[{accessorKey:"id",header:({column:s})=>e.jsx("div",{children:e.jsxs(r,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["ID",e.jsx(d,{})]})}),cell:({row:s})=>e.jsx("div",{children:s.getValue("id")}),size:50},{accessorKey:"title",header:({column:s})=>e.jsx("div",{children:e.jsxs(r,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["제목",e.jsx(d,{})]})}),cell:({row:s})=>e.jsx("div",{className:"overflow-hidden text-ellipsis",children:s.getValue("title")}),size:200},{accessorKey:"authorName",header:({column:s})=>e.jsxs(r,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["작성자",e.jsx(d,{})]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("authorName")}),size:120},{accessorKey:"viewCount",header:({column:s})=>e.jsxs(r,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["조회수",e.jsx(d,{})]}),cell:({row:s})=>e.jsx("div",{children:s.getValue("viewCount")}),size:80},{accessorKey:"createdAt",header:({column:s})=>e.jsxs(r,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["생성일",e.jsx(d,{})]}),cell:({row:s})=>{const i=s.getValue("createdAt").split("T")[0];return e.jsx("div",{children:i})},size:150},{accessorKey:"updatedAt",header:({column:s})=>e.jsxs(r,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["업데이트일",e.jsx(d,{})]}),cell:({row:s})=>{const i=s.getValue("updatedAt").split("T")[0];return e.jsx("div",{children:i})},size:150}],Q=S.reduce((s,o)=>s+(o.size||100),0);function X({noticeData:s,columnFilters:o,setColumnFilters:i,columnVisibility:h,setColumnVisibility:x}){const[j,v]=n.useState([]),[C,u]=n.useState({}),p=k(),g=F({data:s,columns:S,onSortingChange:v,onColumnFiltersChange:i,getCoreRowModel:W(),getSortedRowModel:L(),getFilteredRowModel:U(),onColumnVisibilityChange:x,onRowSelectionChange:u,state:{sorting:j,columnFilters:o,columnVisibility:h,rowSelection:C},columnResizeMode:"onChange",enableColumnResizing:!1});return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs($,{className:"table-fixed",style:{minWidth:`${Q}px`},children:[e.jsx(E,{children:g.getHeaderGroups().map(l=>e.jsx(w,{children:l.headers.map(a=>e.jsx(H,{style:{width:`${a.getSize()}px`},children:a.isPlaceholder?null:y(a.column.columnDef.header,a.getContext())},a.id))},l.id))}),e.jsx(B,{children:g.getRowModel().rows?.length?g.getRowModel().rows.map(l=>e.jsx(w,{"data-state":l.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>p(`/notices/${l.original.id}`),children:l.getVisibleCells().map(a=>e.jsx(D,{className:"overflow-hidden whitespace-nowrap",style:{width:`${a.column.getSize()}px`},children:y(a.column.columnDef.cell,a.getContext())},a.id))},l.id)):e.jsx(w,{children:e.jsx(D,{colSpan:S.length,className:"h-24 text-center whitespace-nowrap",children:"No results."})})})]})})})}function te(){const[s,o]=n.useState(null),[i,h]=n.useState(null),[x,j]=n.useState(""),[v,C]=n.useState([]),[u,p]=n.useState({}),[g,l]=n.useState(!1),a=k(),R=[{id:"id",label:"ID"},{id:"title",label:"제목"},{id:"authorName",label:"작성자"},{id:"viewCount",label:"조회수"},{id:"createdAt",label:"생성일"},{id:"updatedAt",label:"업데이트일"}],f=async(t=0)=>{l(!0);try{const m=(await N.get(`/api/admin/notices?page=${t}`)).data.data;o(m.notices),h(m.pagination)}catch(c){console.log(c)}finally{l(!1)}},b=async()=>{try{const c=(await N.get(`/api/admin/notices/search?title=${x}&size=10`)).data.data;o(c.notices),h(c.pagination)}catch(t){console.log(t)}},I=t=>{t.key==="Enter"&&b()},M=t=>{f(t)};return n.useEffect(()=>{f()},[]),e.jsx("div",{className:"p-6",children:e.jsxs(T,{className:"px-6 py-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(z,{children:[e.jsx(V,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"ml-auto",children:["항목 ",e.jsx(q,{})]})}),e.jsx(K,{align:"end",children:R.map(t=>e.jsx(A,{className:"capitalize",checked:u[t.id]!==!1,onCheckedChange:c=>p(m=>({...m,[t.id]:c})),children:t.label},t.id))})]}),e.jsx(r,{variant:"outline",onClick:()=>a("/notices/create"),children:"글 작성"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{placeholder:"공지사항 검색",value:x,onChange:t=>j(t.target.value),onKeyDown:I,className:"pr-12"}),e.jsx("button",{className:"absolute top-0 right-0 h-full w-10 cursor-pointer",onClick:b,children:e.jsx(O,{})})]})]}),g?e.jsx(J,{}):!s||!i?e.jsx("div",{className:"text-ck-gray-600 ck-body-2 flex items-center justify-center rounded-md border py-10",children:"데이터가 없습니다."}):e.jsxs(e.Fragment,{children:[e.jsx(X,{noticeData:s,columnFilters:v,setColumnFilters:C,columnVisibility:u,setColumnVisibility:p}),e.jsx(G,{pageData:i,onPageChange:M})]})]})})}export{te as default};
