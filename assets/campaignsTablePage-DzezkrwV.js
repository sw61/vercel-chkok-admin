import{r as n,k as G,j as e,B as i,S as T,C as J,D as I,l as R,m as z,n as M,I as O,d as V}from"./index-CJ34pbwU.js";import{u as U,T as K,a as P,b as j,c as A,f as $,d as F,e as b,A as c,g as X,h as _,i as q,C as E,P as Q}from"./paginationHook-DEgmg8Vn.js";import{S as Y}from"./search-BQDt5YfD.js";import"./chevron-left-CIzyo49A.js";const w=[{accessorKey:"id",header:({column:s})=>e.jsx("div",{children:e.jsxs(i,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["ID",e.jsx(c,{})]})}),cell:({row:s})=>e.jsx("div",{children:s.getValue("id")}),size:50},{accessorKey:"title",header:({column:s})=>e.jsx("div",{children:e.jsxs(i,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["캠페인 이름",e.jsx(c,{})]})}),cell:({row:s})=>e.jsx("div",{className:"overflow-hidden text-ellipsis",children:s.getValue("title")}),size:250},{accessorKey:"campaignType",header:({column:s})=>e.jsxs(i,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["캠페인 유형",e.jsx(c,{})]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("campaignType")}),size:120},{accessorKey:"categoryType",header:({column:s})=>e.jsxs(i,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["방문/배송",e.jsx(c,{})]}),accessorFn:s=>s.category.type,cell:({row:s})=>e.jsx("div",{children:s.getValue("categoryType")}),size:120},{accessorKey:"categoryName",header:({column:s})=>e.jsxs(i,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["카테고리",e.jsx(c,{})]}),accessorFn:s=>s.category.name,cell:({row:s})=>e.jsx("div",{children:s.getValue("categoryName")}),size:120},{accessorKey:"approvalStatus",header:({column:s})=>e.jsxs(i,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["처리 상태",e.jsx(c,{})]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("approvalStatus")}),size:100},{accessorKey:"recruitmentStartDate",header:({column:s})=>e.jsxs(i,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["모집 시작일",e.jsx(c,{})]}),cell:({row:s})=>e.jsx("div",{children:s.getValue("recruitmentStartDate")}),size:120},{accessorKey:"productShortInfo",header:({column:s})=>e.jsxs(i,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["상품 간단 소개",e.jsx(c,{})]}),cell:({row:s})=>e.jsx("div",{className:"overflow-hidden text-ellipsis",children:s.getValue("productShortInfo")}),size:250}],Z=w.reduce((s,l)=>s+(l.size||100),0);function ee({campaignData:s,columnFilters:l,setColumnFilters:d,columnVisibility:p,setColumnVisibility:u}){const[y,g]=n.useState([]),[v,S]=n.useState({}),x=G(),m=U({data:s,columns:w,onSortingChange:g,onColumnFiltersChange:d,getCoreRowModel:q(),getSortedRowModel:_(),getFilteredRowModel:X(),onColumnVisibilityChange:u,onRowSelectionChange:S,state:{sorting:y,columnFilters:l,columnVisibility:p,rowSelection:v},columnResizeMode:"onChange",enableColumnResizing:!1});return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs(K,{className:"table-fixed",style:{minWidth:`${Z}px`},children:[e.jsx(P,{children:m.getHeaderGroups().map(o=>e.jsx(j,{children:o.headers.map(t=>e.jsx(A,{style:{width:`${t.getSize()}px`},children:t.isPlaceholder?null:$(t.column.columnDef.header,t.getContext())},t.id))},o.id))}),e.jsx(F,{children:m.getRowModel().rows?.length?m.getRowModel().rows.map(o=>e.jsx(j,{"data-state":o.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>x(`/campaigns/${o.original.id}`),children:o.getVisibleCells().map(t=>e.jsx(b,{className:"overflow-hidden whitespace-nowrap",style:{width:`${t.column.getSize()}px`},children:$(t.column.columnDef.cell,t.getContext())},t.id))},o.id)):e.jsx(j,{children:e.jsx(b,{colSpan:w.length,className:"h-24 text-center whitespace-nowrap",children:"No results."})})})]})})})}const se=()=>e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs(K,{className:"table-fixed",style:{minWidth:"1130px"},children:[e.jsx(P,{children:e.jsx(j,{children:[50,250,120,100,120,120,120,250].map((s,l)=>e.jsx(A,{style:{width:`${s}px`},children:e.jsx(T,{className:"h-4 w-3/4"})},l))})}),e.jsx(F,{children:Array.from({length:10}).map((s,l)=>e.jsx(j,{children:[50,250,120,100,120,120,120,250].map((d,p)=>e.jsx(b,{style:{width:`${d}px`},children:e.jsx(T,{className:"h-4 w-full"})},`${l}-${p}`))},l))})]})});function oe(){const[s,l]=n.useState(),[d,p]=n.useState(),[u,y]=n.useState(""),[g,v]=n.useState("ALL"),[S,x]=n.useState(!1),[m,o]=n.useState([]),[t,f]=n.useState({}),L=[{id:"id",label:"ID"},{id:"title",label:"캠페인 이름"},{id:"campaignType",label:"캠페인 유형"},{id:"approvalStatus",label:"처리 상태"},{id:"approvalDate",label:"처리일"},{id:"createdAt",label:"생성일"},{id:"approvalComment",label:"처리 코멘트"}],N=[{type:"ALL",label:"전체 캠페인"},{type:"PENDING",label:"승인 대기 캠페인"},{type:"APPROVED",label:"승인된 캠페인"},{type:"REJECTED",label:"거절된 캠페인"},{type:"EXPIRED",label:"만료된 캠페인"}],D=async(a=0,h)=>{x(!0);try{const r=h==="ALL"?`/campaigns?page=${a}&size=10`:`/campaigns?approvalStatus=${h}&page=${a}&size=10`,C=(await V.get(r)).data.data;l(C.content),p(C.pagination),console.log(C)}catch(r){console.log(r)}finally{x(!1)}},k=async(a=0)=>{x(!0);try{const r=(await V.get(`/campaigns/search?keyword=${u}&page=${a}&size=10`)).data.data;l(r.content),p(r.pagination)}catch(h){console.log(h)}finally{x(!1)}},H=a=>{D(a,g)},B=a=>{v(a)},W=a=>{a.key==="Enter"&&k()};return n.useEffect(()=>{D(0,g)},[g]),e.jsx("div",{className:"p-6",children:e.jsxs(J,{className:"px-6 py-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(I,{children:[e.jsx(R,{asChild:!0,children:e.jsxs(i,{variant:"outline",children:[N.find(a=>a.type===g)?.label||"캠페인 필터",e.jsx(E,{})]})}),e.jsx(z,{align:"end",children:N.map(a=>e.jsx(M,{checked:g===a.type,onClick:()=>B(a.type),children:a.label},a.type))})]}),e.jsxs(I,{children:[e.jsx(R,{asChild:!0,children:e.jsxs(i,{variant:"outline",children:["항목 ",e.jsx(E,{})]})}),e.jsx(z,{align:"end",children:L.map(a=>e.jsx(M,{className:"capitalize",checked:t[a.id]!==!1,onCheckedChange:h=>f(r=>({...r,[a.id]:h})),children:a.label},a.id))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{placeholder:"캠페인 이름 검색",value:u,onChange:a=>y(a.target.value),onKeyDown:W,className:"pr-12"}),e.jsx("button",{className:"absolute top-0 right-0 h-full w-10 cursor-pointer",onClick:()=>k(0),children:e.jsx(Y,{})})]})]}),S?e.jsx(se,{}):!s||!d||s.length===0||d.totalElements===0?e.jsx("div",{className:"text-ck-gray-600 ck-body-2 flex h-40 items-center justify-center rounded-md border",children:"캠페인 데이터가 없습니다."}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{campaignData:s,columnFilters:m,setColumnFilters:o,columnVisibility:t,setColumnVisibility:f}),e.jsx(Q,{pageData:d,onPageChange:H})]})]})})}export{oe as default};
