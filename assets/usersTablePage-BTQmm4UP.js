import{r as c,k as V,j as e,B as o,C as G,D as J,l as Q,m as X,n as Y,I as Z,d as z}from"./index-CJ34pbwU.js";import{u as K,T as $,a as F,b,c as E,f as D,d as P,e as k,A as d,g as U,h as H,i as B,C as _,P as ee}from"./paginationHook-DEgmg8Vn.js";import{U as se}from"./usersTableSkeleton-BQ3Yo-zd.js";import{S as te}from"./search-BQDt5YfD.js";import"./chevron-left-CIzyo49A.js";function ae({userData:n,columnFilters:j,setColumnFilters:v,columnVisibility:C,setColumnVisibility:S,handleSortChange:x}){const[f,m]=c.useState([]),[w,N]=c.useState({}),u=V(),h=["id","nickname","email","role","createdAt","updatedAt"],g=[{accessorKey:"id",header:({column:s})=>e.jsx("div",{children:h.includes(s.id)&&e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>x(s.id,"ASC"),children:["ID",e.jsx(d,{})]})}),cell:({row:s})=>e.jsx("div",{children:s.getValue("id")}),size:50},{accessorKey:"nickname",header:({column:s})=>e.jsx("div",{children:h.includes(s.id)&&e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>x(s.id,"ASC"),children:["닉네임",e.jsx(d,{})]})}),cell:({row:s})=>e.jsx("div",{children:s.getValue("nickname")}),size:80},{accessorKey:"email",header:({column:s})=>e.jsx("div",{children:h.includes(s.id)&&e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>x(s.id,"ASC"),children:["이메일",e.jsx(d,{})]})}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("email")}),size:150},{accessorKey:"role",header:({column:s})=>e.jsx("div",{children:h.includes(s.id)&&e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>x(s.id,"ASC"),children:["권한",e.jsx(d,{})]})}),cell:({row:s})=>{const l={USER:"사용자",CLIENT:"클라이언트",ADMIN:"관리자"},p=s.getValue("role");return e.jsx("div",{children:l[p]})},size:100},{accessorKey:"active",header:({column:s})=>e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["계정 상태",e.jsx(d,{})]}),cell:({row:s})=>e.jsx("div",{children:s.getValue("active")?"활성화":"비활성화"}),size:100},{accessorKey:"createdAt",header:({column:s})=>e.jsx("div",{children:h.includes(s.id)&&e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>x(s.id,"ASC"),children:["생성일",e.jsx(d,{})]})}),cell:({row:s})=>{const p=s.getValue("createdAt").split("T")[0];return e.jsx("div",{children:p})},size:100},{accessorKey:"updatedAt",header:({column:s})=>e.jsx("div",{children:h.includes(s.id)&&e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>x(s.id,"ASC"),children:["업데이트일",e.jsx(d,{})]})}),cell:({row:s})=>{const p=s.getValue("updatedAt").split("T")[0];return e.jsx("div",{children:p})},size:100}],t=g.reduce((s,l)=>s+(l.size||100),0),i=K({data:n,columns:g,onSortingChange:m,onColumnFiltersChange:v,getCoreRowModel:B(),getSortedRowModel:H(),getFilteredRowModel:U(),onColumnVisibilityChange:S,onRowSelectionChange:N,state:{sorting:f,columnFilters:j,columnVisibility:C,rowSelection:w},columnResizeMode:"onChange",enableColumnResizing:!1});return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs($,{className:"table-fixed",style:{minWidth:`${t}px`},children:[e.jsx(F,{children:i.getHeaderGroups().map(s=>e.jsx(b,{children:s.headers.map(l=>e.jsx(E,{style:{width:`${l.getSize()}px`},children:l.isPlaceholder?null:D(l.column.columnDef.header,l.getContext())},l.id))},s.id))}),e.jsx(P,{children:i.getRowModel().rows?.length?i.getRowModel().rows.map(s=>e.jsx(b,{"data-state":s.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>u(`/users/${s.original.id}`),children:s.getVisibleCells().map(l=>e.jsx(k,{className:"overflow-hidden text-ellipsis whitespace-nowrap",style:{width:`${l.column.getSize()}px`},children:D(l.column.columnDef.cell,l.getContext())},l.id))},s.id)):e.jsx(b,{children:e.jsx(k,{colSpan:g.length,className:"h-24 text-center whitespace-nowrap",children:"No results."})})})]})})})}function le({companyData:n,columnFilters:j,setColumnFilters:v,columnVisibility:C,setColumnVisibility:S}){const[x,f]=c.useState([]),[m,w]=c.useState({}),N=V(),u=[{accessorKey:"id",header:({column:t})=>e.jsx("div",{children:e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["ID",e.jsx(d,{})]})}),cell:({row:t})=>e.jsx("div",{children:t.getValue("id")}),size:50},{accessorKey:"companyName",header:({column:t})=>e.jsx("div",{children:e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["회사 이름",e.jsx(d,{})]})}),cell:({row:t})=>e.jsx("div",{children:t.getValue("companyName")}),size:80},{accessorKey:"businessRegistrationNumber",header:({column:t})=>e.jsx("div",{children:e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["사업자 등록 번호",e.jsx(d,{})]})}),cell:({row:t})=>e.jsx("div",{className:"lowercase",children:t.getValue("businessRegistrationNumber")}),size:150},{accessorKey:"createdAt",header:({column:t})=>e.jsx("div",{children:e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["생성일",e.jsx(d,{})]})}),cell:({row:t})=>{const s=t.getValue("createdAt").split("T")[0];return e.jsx("div",{children:s})},size:100},{accessorKey:"updatedAt",header:({column:t})=>e.jsx("div",{children:e.jsxs(o,{variant:"ghost",className:"has-[>svg]:px-0",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["업데이트일",e.jsx(d,{})]})}),cell:({row:t})=>{const s=t.getValue("updatedAt").split("T")[0];return e.jsx("div",{children:s})},size:100}],h=u.reduce((t,i)=>t+(i.size||100),0),g=K({data:n,columns:u,onSortingChange:f,onColumnFiltersChange:v,getCoreRowModel:B(),getSortedRowModel:H(),getFilteredRowModel:U(),onColumnVisibilityChange:S,onRowSelectionChange:w,state:{sorting:x,columnFilters:j,columnVisibility:C,rowSelection:m},columnResizeMode:"onChange",enableColumnResizing:!1});return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs($,{className:"table-fixed",style:{minWidth:`${h}px`},children:[e.jsx(F,{children:g.getHeaderGroups().map(t=>e.jsx(b,{children:t.headers.map(i=>e.jsx(E,{style:{width:`${i.getSize()}px`},children:i.isPlaceholder?null:D(i.column.columnDef.header,i.getContext())},i.id))},t.id))}),e.jsx(P,{children:g.getRowModel().rows?.length?g.getRowModel().rows.map(t=>e.jsx(b,{"data-state":t.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>N(`/users/${t.original.userId}`),children:t.getVisibleCells().map(i=>e.jsx(k,{className:"overflow-hidden text-ellipsis whitespace-nowrap",style:{width:`${i.column.getSize()}px`},children:D(i.column.columnDef.cell,i.getContext())},i.id))},t.id)):e.jsx(b,{children:e.jsx(k,{colSpan:u.length,className:"h-24 text-center whitespace-nowrap",children:"No results."})})})]})})})}function de(){const[n,j]=c.useState(!1),[v,C]=c.useState(null),[S,x]=c.useState(null),[f,m]=c.useState(null),[w,N]=c.useState(""),[u,h]=c.useState([]),[g,t]=c.useState({}),[i,s]=c.useState(!1),[l,p]=c.useState({column:"id",direction:"ASC"}),O=[{id:"id",label:"ID"},{id:"nickname",label:"닉네임"},{id:"email",label:"이메일"},{id:"role",label:"권한"},{id:"active",label:"활성화 상태"},{id:"createdAt",label:"생성일"},{id:"updatedAt",label:"갱신일"}],R=async(a=0,r=l.column,y=l.direction)=>{s(!0);try{const I=(await z.get(`/users?page=${a}&size=10&sortBy=${r}&sortDirection=${y}`)).data.data;C(I.content),m(I.pagination)}catch(T){console.log(T)}finally{s(!1)}},A=async(a=0)=>{s(!0);try{const y=(await z.get(`/api/companies/examine?page=${a}&size=10`)).data.data;x(y.companies),m(y.pagination)}catch(r){console.log(r)}finally{s(!1)}},M=async()=>{if(!n)try{const r=(await z.get(`/users/search?keyword=${w}&size=10`)).data.data;C(r.content),m(r.pagination)}catch(a){console.log(a)}},W=a=>{a.key==="Enter"&&M()},L=a=>{n?A(a):R(a)},q=a=>{if(!n){let r="ASC";l.column===a&&(r=l.direction==="ASC"?"DESC":"ASC"),p({column:a,direction:r}),R(0,a,r)}};return c.useEffect(()=>{n?A():R()},[n]),e.jsx("div",{className:"p-6",children:e.jsxs(G,{className:"px-6 py-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("div",{className:"flex gap-4",children:n?e.jsx(o,{onClick:()=>j(!1),variant:n?"outline":"default",children:"사용자 목록"}):e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:"ml-auto",children:["항목 ",e.jsx(_,{})]})}),e.jsx(X,{align:"end",children:O.map(a=>e.jsx(Y,{className:"capitalize",checked:g[a.id]!==!1,onCheckedChange:r=>t(y=>({...y,[a.id]:r})),children:a.label},a.id))})]}),e.jsx(o,{onClick:()=>j(!0),variant:n?"default":"outline",children:"클라이언트 신청 인원"})]})}),!n&&e.jsxs("div",{className:"relative",children:[e.jsx(Z,{placeholder:"사용자 이름 검색",value:w,onChange:a=>N(a.target.value),onKeyDown:W,className:"pr-12"}),e.jsx("button",{className:"absolute top-0 right-0 h-full w-10 cursor-pointer",onClick:M,children:e.jsx(te,{})})]})]}),i?e.jsx(se,{}):!n&&!v||n&&!S||!f?e.jsx("div",{className:"text-ck-gray-600 ck-body-2 flex items-center justify-center rounded-md border py-10",children:"데이터가 없습니다."}):e.jsxs(e.Fragment,{children:[n?e.jsx(le,{companyData:S,columnFilters:u,setColumnFilters:h,columnVisibility:g,setColumnVisibility:t}):e.jsx(ae,{userData:v,columnFilters:u,setColumnFilters:h,columnVisibility:g,setColumnVisibility:t,handleSortChange:q}),e.jsx(ee,{pageData:f,onPageChange:L})]})]})})}export{de as default};
